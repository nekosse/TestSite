<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />


</head>
<body>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>
	function fileChange(){
	var file = document.getElementById('input_img');
		console.log(file.files[0]);
	Object.defineProperty(file.files[0], 'name', {
	writable: true,
	value: "NomTest"
	});
	console.log(file.files[0]);
	var form = new FormData();
	form.append("image", file.files[0]);
	console.log(form)


	var settings = {
	  "url": "https://api.imgbb.com/1/upload?key=7849ace46f6df21b6cf301910272b61f",
	  "method": "POST",
	  "timeout": 0,
	  "processData": false,
	  "mimeType": "multipart/form-data",
	  "contentType": false,
	   "datatype": "json",
		"data": {"image": file.files[0], "name": "NomTest"}

	};
	$('#gif').css('visibility', 'visible'); 
	$.ajax(settings).done(function (response) {
	  console.log(response);
	  document.write(response);
	  var jx = JSON.parse(response);
	  console.log(jx.data.url);


	});
	}
</script>

    <p>
	<label for="email">Entrez votre email:</label>
	<input type="email" id="email" name="email">
	
	<p>A quoi correspond votre photo ?</p>

	<div>
	  <input type="radio" id="porteO" name="type" value="porteO"
			 checked>
	  <label for="porteO">Porte ouverte</label>
	</div>

	<div>
	  <input type="radio" id="porteF" name="type" value="porteF">
	  <label for="porteF">Porte fermée</label>
	</div>

	<div>
	  <input type="radio" id="pieton" name="type" value="pieton">
	  <label for="pieton">Passage piéton</label>
	</div>	
	
	<input type="file" id="input_img" name="image" accept="image/*"  capture="environment">	
    <input type="submit" value="Upload" onclick="fileChange()" > 

    </p>
    <p>
		<img src="char.gif" id="gif" style=" visibility: hidden;"> 
        <span id="textStatus"></span>
    </p>
</body>
</html>

